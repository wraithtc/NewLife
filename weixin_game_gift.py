import pycurl,io,urllib,smtplib
import re
import time
from datetime import datetime, timezone, timedelta

head=['User-Agent: Mozilla/5.0 (Linux; Android 8.0; MIX 2 Build/OPR1.170623.027; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/6.2 TBS/044030 Mobile Safari/537.36 MicroMessenger/6.6.6.1300(0x26060636) NetType/WIFI Language/zh_CN', 'Accept: */*', 'Referer: https://game.weixin.qq.com/cgi-bin/h5/static/giftcenter/index.html?wechat_pkgid=giftcenter_index&appid=wx95a3a4d7c627e07d&abt=21&ssid=2402&&rpt_allpath=2402&ssid=2402&rpt_allpath=2402', 'Accept-Encoding: gzip, deflate', 'Accept-Language: zh-CN,en-US;q=0.8', 'Cookie: pgv_pvi=7820439552; pgv_si=s7030299648; eas_sid=81q5Z115p5a4T866I3T5534698; sd_userid=13631517739479057; sd_cookie_crttime=1517739479057; PTTcookiesFrom=wx_article; PTTuserFirstTime=1522214650304; ts_uid=9049320435; PTTrouteLine=a20170927s8summary; yxzj_a20180402yyhd_role_oBlfPvrq5HBSJbsOkH6ogeDC6F4A=%7B%22uOpenId%22%3A%22owanlslPV2xzo2at6lCgx1PxXFTQ%22%2C%22sArea%22%3A%223%22%2C%22sPartition%22%3A%223132%22%2C%22sAreaName%22%3A%22%u4E5D%u5DDE%u4E94%u5CB3%22%7D; pgv_pvid=3177217528; pgv_info=pgvReferrer=https://qt.qq.com/v/hero/h5_player.html&ssid=s8729387614; qv_als=pFVwiIMLqj9tx6PzA11525069638uvD3NA==; httponly; pass_ticket=aVfFxlru2ze2q8vjXRl+qEUZt++PO+Trqjxz7iXby+M=; s=TVRVM01ETXhNRFU9fDE1MjUzMjQ0OTd8NGUyODBkODFjN2NmYWY1OWY4N2EyODFkNTczODI1Mzd8MTUyNTMyNDQ5Nw==; uin=MTU3MDMxMDU=; key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2', 'X-Requested-With: com.tencent.mm', 'Q-UA2: QV=3&PL=ADR&PR=WX&PP=com.tencent.mm&PPVN=6.6.6&TBSVC=43607&CO=BK&COVC=044030&PB=GE&VE=GA&DE=PHONE&CHID=0&LCID=9422&MO= MIX2 &RL=1080*2030&OS=8.0.0&API=26', 'Q-GUID: 37cfa2ffb482e7dfe3bdfe9713b788cb', 'Q-Auth: 31045b957cf33acf31e40be2f3e71c5217597676a9729f1b']

urls=['game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A481450%2C%22type%22%3A0%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A481444%2C%22type%22%3A2%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A448570%2C%22type%22%3A0%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A448571%2C%22type%22%3A0%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A448574%2C%22type%22%3A0%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A448575%2C%22type%22%3A0%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A448576%2C%22type%22%3A0%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A522313%2C%22type%22%3A8%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A522333%2C%22type%22%3A8%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A522334%2C%22type%22%3A8%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A557601%2C%22type%22%3A8%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/giftreceive?data=%7B%22req%22%3A%7B%22id%22%3A557626%2C%22type%22%3A8%2C%22appid%22%3A%22wx95a3a4d7c627e07d%22%2C%22plattype%22%3A1%2C%22pre%22%3Afalse%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1', 'game.weixin.qq.com/cgi-bin/gamegiftwap/friendshare?data=%7B%22req%22%3A%7B%22appid%22%3A%22wx95a3a4d7c627e07d%22%7D%7D&uin=MTU3MDMxMDU%3D&key=bb80937825ed292266dda8f559ea57a963b3d4f360b1b2e1fc9f3cfbc947aa88f1a1bb9417a4ce71cb5cf3a001e766074a4e81071abbd98037ca50b5e064e8d4087da9c2894d6fcc8f2c3436797d61c2&pass_ticket=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&method=GET&timeout=30000&abtest_cookie=&abt=21&mmgame_uin=MTU3MDMxMDU%3D&mmgame_key=aVfFxlru2ze2q8vjXRl%2BqEUZt%2B%2BPO%2BTrqjxz7iXby%2BM%3D&mmgame_pass_ticket=787c8e219387704a65447e17e5d22a8e13ac57b49713445b61af6f5bbbb4c8785c7bfd9f0f2b6dccb203bd2d6bd220fbd6082b7ef9519aed2615a02aaeb4fd7fe1231c165c7c214f0509dc6e668daff1']
printstr=''
for i in range(0,13):
    buf = io.BytesIO()
    c = pycurl.Curl()
    c.setopt(pycurl.CONNECTTIMEOUT, 8)
    c.setopt(pycurl.WRITEFUNCTION, buf.write)
    c.setopt(pycurl.HTTPHEADER, head)
    c.setopt(pycurl.URL, urls[i])
    c.perform()

    #print(buf.getvalue().decode())
    printstr = printstr+buf.getvalue().decode()+'\n'
    c.close()

print(printstr)
fp=open('result', 'w')
fp.write(printstr)

